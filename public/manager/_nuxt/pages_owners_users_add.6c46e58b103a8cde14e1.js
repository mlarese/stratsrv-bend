webpackJsonp([16],{"/TGQ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("twT+"),n=a("BMtU");var s=function(t){a("8W7X")},o=a("VU/8")(r.a,n.a,!1,s,null,null);e.default=o.exports},"3i46":function(t,e,a){"use strict";var r=a("mtWM"),n=a.n(r);e.a={props:{endPoint:{default:""}},computed:{dragging:function(){return this.$upload.dropzone("attachments").active},outputFiles:function(){for(var t=this.$upload.files("attachments").all,e=[],a=0;a<t.length;a++){var r=t[a].$file;e.push({fileName:r.name,description:"Desc "+r.name})}return e}},mounted:function(){var t=this;this.$upload.on&&this.$upload.on("attachments",{maxFilesSelect:20,dropzoneId:"app-upload-drop-zone",multiple:!0,startOnSelect:!0,extensions:!1,onComplete:function(){this.$emit("after-upload",t.outputFiles)},http:function(e){var a=""+t.endPoint;n.a.post(a,e.body).then(e.success).catch(e.error)}})},beforeDestroy:function(){this.$upload&&this.$upload.off&&this.$upload.off("attachments")}}},"6BrR":function(t,e,a){var r=a("rsnP");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("6d58ffd0",r,!0,{sourceMap:!1})},"8W7X":function(t,e,a){var r=a("nbbW");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("ae5680be",r,!0,{sourceMap:!1})},"B/f5":function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"mt-2"},[a("v-flex",{attrs:{xs6:""}},[a("AttachmentList",t._g({attrs:{attachments:t.attachementsObject.attachments,"edit-mode":t.showUploader}},t.$listeners))],1),a("v-flex",{attrs:{xs6:""}},[t.showUploader?a("Uploader",t._b({on:{"after-upload":t.afterUpload}},"Uploader",t.$attrs,!1)):t._e()],1)],1)},staticRenderFns:[]};e.a=r},BG5b:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"user-add-form",attrs:{row:"","grid-list-sm":""}},[a("form-bar",{attrs:{disabled:!t.form.valid,to:"/owners/users",color:"orange darken-1",caption:"Save user"},on:{"on-save":t.onSaveUser}}),a("v-form",{ref:"form",model:{value:t.form.valid,callback:function(e){t.$set(t.form,"valid",e)},expression:"form.valid"}},[a("v-card",{staticClass:"pa-4"},[a("v-layout",{staticClass:"title",attrs:{row:""}},[t._v(t._s(t.$t("User Data")))]),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs2:""}},[a("v-select",{attrs:{disabled:!t.canSave,items:t.comboLanguages,"item-text":"label","item-value":"id",required:"",rules:t.rules.language,label:t.$t("Language")},model:{value:t.$record.language,callback:function(e){t.$set(t.$record,"language",e)},expression:"$record.language"}})],1),a("v-flex",{attrs:{xs10:""}},[a("v-select",{attrs:{disabled:!t.canSave||!t.$record.language,label:t.$t("Term"),"item-text":"name","item-value":"uid",items:t.list,required:"",rules:t.rules.term},model:{value:t.$record.termId,callback:function(e){t.$set(t.$record,"termId",e)},expression:"$record.termId"}})],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-alert",{attrs:{value:!t.$record.termId,type:"info"}},[t._v("\n                    "+t._s(t.$t("Select language and term"))+"\n                ")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.$record.termId,expression:"$record.termId"}]},[t.loadingTerm?a("v-progress-linear",{attrs:{indeterminate:!0,color:"info"}}):t._e(),t._l(t.$record.paragraphs,function(e,r){return[t._l(e.treatments,function(e,n){return[t.loadingTerm?t._e():a("v-layout",{key:r+"_"+n,staticClass:"ml-2"},[e.mandatory?a("v-checkbox",{staticClass:"pt-2 user-add-form-checkbox",attrs:{rules:t.rules.checkbox,label:e.code+" - "+e.text,required:e.mandatory},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"flag.selected"}}):a("v-checkbox",{staticClass:"pt-2 user-add-form-checkbox",attrs:{label:e.code+" - "+e.text,required:e.mandatory},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"flag.selected"}})],1)]})]}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{disabled:!t.canSave,box:"",label:t.$t("Name"),required:"",rules:t.rules.name},model:{value:t.$record.name,callback:function(e){t.$set(t.$record,"name",e)},expression:"$record.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{disabled:!t.canSave,box:"",required:"",rules:t.rules.surname,label:t.$t("Surname")},model:{value:t.$record.surname,callback:function(e){t.$set(t.$record,"surname",e)},expression:"$record.surname"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{disabled:!t.canSave,box:"",label:t.$t("Email"),required:"",rules:t.rules.email},model:{value:t.$record.email,callback:function(e){t.$set(t.$record,"email",e)},expression:"$record.email"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{disabled:!t.canSave,box:"",label:t.$t("Telephone")},model:{value:t.$record.telephone,callback:function(e){t.$set(t.$record,"telephone",e)},expression:"$record.telephone"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{disabled:!t.canSave,"item-text":"domain","item-value":"domain",items:t.optionsDomains,required:"",rules:t.rules.domain,box:"",label:t.$t("Domain")},model:{value:t.$record.domain,callback:function(e){t.$set(t.$record,"domain",e)},expression:"$record.domain"}})],1),t._e()],1),a("v-layout",{attrs:{row:"",wrap:"","align-baseline":""}},[a("v-flex",{attrs:{xs12:""}},[a("FileAttachmentManager",{attrs:{"edit-mode":!0,"show-uploader":!0,"end-point":t.apiEndpoint,"attachements-object":t.$attachments},on:{"after-upload":t.onAfterUpload,"delete-attachment":t.onDeleteAttachment,"download-attachment":t.onDownloadAttachment}})],1)],1)],2)],1)],1)],1)},staticRenderFns:[]};e.a=r},BMtU:function(t,e,a){"use strict";var r={render:function(){var t=this.$createElement;return(this._self._c||t)("UserAddForm")},staticRenderFns:[]};e.a=r},Dxhv:function(t,e,a){"use strict";a.d(e,"a",function(){return o});var r=a("Dd8w"),n=a.n(r),s=a("NYxO"),o=function(t){return{created:function(){this.setFormSaving(!1)},methods:n()({},Object(s.mapActions)(t,["save"]),Object(s.mapMutations)(t,["setFormSaving"])),computed:n()({},Object(s.mapState)(t,["$record","record","form"]),Object(s.mapGetters)(t,["isAddMode","isEditMode"]),{isDisabled:function(){return!!this.form.saving||!this.form.valid}})}}},FC96:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".user-add-form-checkbox label{line-height:38px}",""])},FEar:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"elevation-1",class:{"drop-zone-active":t.dragging},attrs:{id:"app-upload-drop-zone"}},[a("a",{attrs:{name:"attach-a"},on:{click:function(e){t.$upload.select("attachments")}}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pa-5 text-xs-center mt-5",attrs:{xs12:""}},[a("div",[t._v(t._s(t.$t("Drop files anywhere here to begin upload.")))]),a("div",[t._v(t._s(t.$t("Or click to select")))])])],1)],1)])],1)},staticRenderFns:[]};e.a=r},GEMo:function(t,e,a){var r=a("zGJu");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("4e09236a",r,!0,{sourceMap:!1})},GFJX:function(t,e,a){"use strict";var r=a("ZClL"),n=a("aQuG");e.a={name:"FileAttachmentManager",props:["attachementsObject","editMode","showUploader"],methods:{afterUpload:function(t){this.$emit("after-upload",t)}},components:{AttachmentList:n.a,Uploader:r.a}}},JoV4:function(t,e,a){"use strict";e.a={props:["attachments","editMode"],data:function(){return{$attachments:[]}},name:"AttachmentList",computed:{currentAttachments:function(){return this.attachments&&this.attachments.filter?this.attachments.filter(function(t){return!t.deleted}):[]}},methods:{onShowFile:function(t){this.$emit("download-attachment",t)},deleteItem:function(t){this.$emit("delete-attachment",t)}}}},KHKM:function(t,e,a){"use strict";var r=a("Dd8w"),n=a.n(r),s=a("NYxO");e.a={name:"FormBar",props:["to","color","disabled","caption"],computed:n()({},Object(s.mapState)("api",["isAjax"]),Object(s.mapGetters)("auth",["canSave"]),{isDisabled:function(){return!this.canSave||!(!this.disabled&&!this.isAjax)}}),methods:{onSave:function(){this.$emit("on-save")}}}},Luo4:function(t,e,a){"use strict";var r=a("pRr6"),n=a("BG5b");var s=function(t){a("ytto")},o=a("VU/8")(r.a,n.a,!1,s,null,null);e.a=o.exports},MKll:function(t,e,a){var r=a("rGc4");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("4c5a4e7f",r,!0,{sourceMap:!1})},VebV:function(t,e,a){"use strict";a.d(e,"a",function(){return d});var r=a("Dd8w"),n=a.n(r),s=a("NYxO"),o=a("aMKN"),i=a("lbHh"),c=a.n(i),l=a("jLWv"),d=function(t){return{components:{FileAttachmentManager:o.a},methods:n()({},Object(s.mapActions)("owners/users",["downloadAttachment"]),Object(s.mapMutations)("owners/users",["removeAttachment","blankAttachments","addAttachments"]),{onAfterUpload:function(t){this.addAttachments(t)},onDownloadAttachment:function(t){var e=this.$auth.getToken(Object(l.c)()),a=e.split("bearer ");a.length>0?(e=a[1],c.a.set("token",e),this.downloadAttachment({i:t,privacyUid:this.privacyUid})):alert(this.$t("Error"))},onDeleteAttachment:function(t){confirm(this.$t("Do you confirm?"))&&this.removeAttachment(t)}}),computed:n()({},Object(s.mapState)("owners/users",["attachments","$attachments"]),Object(s.mapGetters)("owners/users",["attachmentList"]))}}},YrFo:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{dense:""}},[a("v-toolbar-title",[t._v(t._s(t.$t("Attachments")))])],1),a("v-card",{staticStyle:{overflow:"auto"},attrs:{height:"200"}},[a("v-list",{staticStyle:{"min-height":"200px"},attrs:{"two-line":"",dense:""}},[t._l(t.currentAttachments,function(e,r){return[a("v-list-tile",{key:r,attrs:{avatar:""}},[a("v-list-tile-avatar",{attrs:{color:"blue darken-2"}},[a("v-btn",{attrs:{avatar:"",flat:"",dark:""},on:{click:function(e){t.onShowFile(r)}}},[a("v-icon",{attrs:{dark:"",large:"",dark:""}},[t._v("description")])],1)],1),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{textContent:t._s(e.fileName)}}),a("v-list-tile-sub-title",[a("v-text-field",{staticClass:"attachment-description-input",attrs:{"hide-details":"",disabled:!t.editMode,solo:""},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"a.description"}})],1)],1),t.editMode?a("v-list-tile-action",[a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(e){t.deleteItem(r)}}},[a("v-icon",[t._v("delete")])],1)],1):t._e()],1),a("v-divider")]})],2)],1)],1)},staticRenderFns:[]};e.a=r},ZClL:function(t,e,a){"use strict";var r=a("3i46"),n=a("FEar");var s=function(t){a("MKll")},o=a("VU/8")(r.a,n.a,!1,s,null,null);e.a=o.exports},aMKN:function(t,e,a){"use strict";var r=a("GFJX"),n=a("B/f5");var s=function(t){a("GEMo")},o=a("VU/8")(r.a,n.a,!1,s,"data-v-7f28f6b3",null);e.a=o.exports},aQuG:function(t,e,a){"use strict";var r=a("JoV4"),n=a("YrFo");var s=function(t){a("6BrR")},o=a("VU/8")(r.a,n.a,!1,s,null,null);e.a=o.exports},nbbW:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},pRr6:function(t,e,a){"use strict";var r=a("//Fk"),n=a.n(r),s=a("Dd8w"),o=a.n(s),i=a("NYxO"),c=a("YtWf"),l=a("r3Mr"),d=a("Dxhv"),u=a("VebV"),m=a("uHjU");e.a={mixins:[Object(d.a)("owners/users"),Object(u.a)("owners/users")],components:{FormBar:l.a},created:function(){this.apiEndpoint=m.a+"/user/attachmentupd/"+this.$record.id},watch:{"$record.language":function(t){this.$nextTick(this.onLangTermChange)},"$record.termId":function(t){this.$nextTick(this.onLangTermChange)}},data:function(){var t=this;return{domains:[],apiEndpoint:"",loadingTerm:!1,rules:{term:[function(e){return!!e||t.$t("required")}],name:[function(e){return!!e||t.$t("required")}],language:[function(e){return!!e||t.$t("required")}],checkbox:[function(e){return e||t.$t("required")}],domain:[function(e){return!!e||t.$t("required")}],email:[function(e){return!!e||t.$t("required")},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,6})+$/.test(e)||t.$t("E-mail not valid")}],telephone:[function(e){return!!e||t.$t("required")}]}}},methods:o()({},Object(i.mapActions)("terms",["load","loadToSubscribeTerm"]),Object(i.mapActions)("owners/termspages",["loadByTermId","saveUser"]),Object(i.mapMutations)("owners/users",["removeAttachment","blankAttachments","addAttachments"]),Object(i.mapGetters)("auth",["canSave"]),{onAfterUpload:function(t){this.addAttachments(t)},onDeleteAttachment:function(t){confirm(this.$t("Do you confirm?"))&&this.removeAttachment(t)},onSaveUser:function(){var t=this,e=this.$auth.user.ownerId,a=this.$record.domain,r={attachments:this.$attachments,paragraphs:this.$record.paragraphs,$record:this.$record,domain:a,page:"",ownerId:e};this.saveUser(r).then(function(){return t.$router.push("/owners/users")})},onLangTermChange:function(){var t=this,e=this.$record,a=e.termId,r=e.language;if(a){this.loadingTerm=!0;var s=[this.loadToSubscribeTerm({termId:a,language:r}).then(function(e){t.$record.paragraphs=e}),this.loadByTermId(a)];return n.a.all(s).then(function(){t.loadingTerm=!1}).catch(function(){t.loadingTerm=!1})}}}),computed:o()({privacyUid:function(){return this.$record.id}},Object(i.mapState)("terms",["list"]),Object(i.mapState)("app",["comboLanguages"]),Object(i.mapState)("owners/termspages",["pagesList","domainsList"]),Object(i.mapGetters)("owners/termspages",["optionsPages","optionsDomains"]),Object(c.d)("owners/users/addRecord/*"),Object(i.mapState)("owners/users",["attachments","$attachments"]),{$record:Object(c.d)("owners/users/addRecord")})}},r3Mr:function(t,e,a){"use strict";var r=a("KHKM"),n=a("zA40"),s=a("VU/8")(r.a,n.a,!1,null,null,null);e.a=s.exports},rGc4:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"#app-upload-drop-zone{height:251px!important}#app-upload-drop-zone.drop-zone-active{background:#c1c1c1}",""])},rsnP:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".attachment-description-input{min-height:20px}.attachment-description-input .input-group__input{padding:0!important;border-width:0}.attachment-description-input input{padding:0 0 0 5px;background:#f6f6f6}",""])},"twT+":function(t,e,a){"use strict";var r=a("DDt0"),n=a("Luo4");e.a={components:{UserAddForm:n.a},props:[],fetch:function(t){var e=t.store,a=t.next,n=Object(r.newUser)();if(e.commit("owners/users/setAddRecord",n,{root:!0}),e.commit("owners/users/setAttachments",{id:n.id,attachments:[]},{root:!1}),!e.getters["auth/canAdd"])return a("/")}}},ytto:function(t,e,a){var r=a("FC96");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("8e399304",r,!0,{sourceMap:!1})},zA40:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"mb-2",staticStyle:{"border-bottom":"1px solid silver"},attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"btn-back",attrs:{xs4:"","pt-1":""}},[a("v-tooltip",{attrs:{right:""}},[a("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",fab:"",flat:"",small:"",to:t.to,"active-class":""},slot:"activator"},[a("v-icon",[t._v("reply")])],1),a("span",[t._v(t._s(t.$t("Back")))])],1)],1),a("v-spacer"),a("v-tooltip",{attrs:{left:""}},[a("v-btn",{staticClass:"elevation-0 mb-2",attrs:{slot:"activator",color:"green darken-3",dark:"",fab:"",small:"",disabled:t.isDisabled},on:{click:t.onSave},slot:"activator"},[a("v-icon",[t._v("save")])],1),a("span",[t._v(t._s(t.$t(t.caption)))])],1)],1)},staticRenderFns:[]};e.a=r},zGJu:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])}});