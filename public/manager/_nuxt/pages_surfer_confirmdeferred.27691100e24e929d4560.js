webpackJsonp([31],{"0QMV":function(t,e,a){var s=a("2s93");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("24829394",s,!0,{sourceMap:!1})},"21M4":function(t,e,a){"use strict";var s=a("UbEG"),r=a("k7t3");var n=function(t){a("BCRM")},i=a("VU/8")(s.a,r.a,!1,n,null,null);e.a=i.exports},"2s93":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".bigger-check{position:relative;top:3px;width:16px;height:16px}.owner-user-form-terms-data-table{padding:0;background:transparent;width:100%;border:1px solid silver;border-spacing:0;border-collapse:collapse}.owner-user-form-terms-data-table th{text-transform:uppercase}.owner-user-form-terms-data-table td,.owner-user-form-terms-data-table th{background:#fff;padding:3px 3px 3px 5px;border-spacing:0;border:1px solid silver;text-align:left;vertical-align:baseline}",""])},BCRM:function(t,e,a){var s=a("o9cn");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("5298a995",s,!0,{sourceMap:!1})},FvIf:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-xs-center mt-2"},[e("ConfirmDeferred")],1)},staticRenderFns:[]};e.a=s},NjoO:function(t,e,a){"use strict";var s=a("Zd8h");e.a={layout:"whitepage",components:{ConfirmDeferred:s.a},auth:!1,created:function(){this.$route.query.lang&&(this.$i18n.locale=this.$route.query.lang)},fetch:function(t){var e=t.store,a=(t.router,t.query),s=(t.redirect,t.app,a._k),r=a._j;return e.commit("privacy/clearError",null,{root:!0}),e.dispatch("privacy/deferredVisited",{_k:s,_j:r},{root:!0}).catch(function(){e.commit("privacy/setError",{message:"Error loading user data",type:"deferred-visit"},{root:!0})})}}},UbEG:function(t,e,a){"use strict";e.a={components:{},props:{hideCancel:{default:!1},hideDelete:{default:!1},editMode:Boolean,color:{default:"grey darken-1"}},methods:{onEditClick:function(){this.$emit("edit")},onDeleteClick:function(){this.$emit("delete")},onSaveClick:function(){this.$emit("save")},onCancelClick:function(){this.$emit("cancel")}}}},Zd8h:function(t,e,a){"use strict";var s=a("ff79"),r=a("f5ZG"),n=a("VU/8")(s.a,r.a,!1,null,null,null);e.a=n.exports},f5ZG:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{staticClass:"align-center",attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"align-center headline",attrs:{xs12:""}},[t._v("\n            "+t._s(t.$t("dbloptin.done"))+"!\n        ")]),a("v-flex",{staticClass:"align-center my-2",attrs:{xs12:""}},[a("v-icon",{attrs:{large:"",color:"blue lighten-2"}},[t._v("thumb_up")])],1),a("v-flex",{staticClass:"align-center body-1",attrs:{xs12:""}},[a("b",[t._v(t._s(t.$t("dbloptin.dataconfirmed")))])]),a("v-flex",{staticClass:"align-center body-1  my-2",attrs:{xs12:""}},[t._v("\n            "+t._s(t.$t("dbloptin.follow_your_instructions"))+"\n        ")]),a("v-flex",{staticClass:"align-center body-1",attrs:{xs12:""}},[a("b",[t._v(t._s(t.$t("dbloptin.thanks")))])]),a("v-flex",{staticClass:"align-center body-1 my-2",attrs:{xs12:""}},[t._v("\n            "+t._s(t.$t("dbloptin.showdetails"))+"\n        ")]),a("v-flex",{staticClass:"align-center body-1 my-2",attrs:{xs12:""}},[a("v-btn",{staticClass:"elevation-0",staticStyle:{"text-transform":"uppercase"},attrs:{dark:"",color:"blue lighten-2"},on:{click:function(e){t.showDetail=!t.showDetail}}},[t._v(t._s(t.$t("dbloptin.viewdetail")))])],1)],1),a("v-layout",{staticClass:"align-center",attrs:{row:"",wrap:""}},[t.showDetail?a("UserFormTerms",{attrs:{"read-only":"true","allow-all":!1,"show-smart-bar":!1,"multi-privacy":!1}}):t._e()],1)],1)},staticRenderFns:[]};e.a=s},ff79:function(t,e,a){"use strict";var s=a("y9sX");e.a={components:{UserFormTerms:s.a},data:function(){return{showDetail:!1}},name:"ConfirmDeferred"}},ipnL:function(t,e,a){"use strict";var s=a("Dd8w"),r=a.n(s),n=a("NYxO"),i=a("21M4");e.a={name:"UserFormTerms",methods:r()({onSave:function(){var t=this;this.$nuxt.$loading.start(),this.saveAllTerms(this.modified).then(function(){t.loadRecordList({id:t.params.id}),t.$nuxt.$loading.finish(),t.dataEdit=!1}).catch(function(){return t.$nuxt.$loading.finish()})},flagDisabled:function(t){return!this.dataEdit||!!t.mandatory&&!this.allowAll},allFlags:function(t){if(!t||!t.paragraphs)return[];for(var e=[],a=0;a<t.paragraphs.length;a++)for(var s=t.paragraphs[a],r=0;r<s.treatments.length;r++){var n=s.treatments[r],i=n.code,o=n.selected,l=n.mandatory;e.push({code:i,selected:o,mandatory:l})}return e},addChangedTerm:function(t){var e=this,a=this.modified.findIndex(function(e){return t.id===e.id});this.$nextTick(function(){var s={id:t.id,privacy:t.privacy,privacyFlags:e.allFlags(t.privacy)};a<0?e.modified.push(s):e.modified[a]=s})}},Object(n.mapActions)("owners/users",["saveAllTerms","loadRecordList"]),{termName:function(t){var e=0;return e=t.privacy&&t.privacy.termId?t.privacy.termId:t.termId,this.termsMap[e]?this.termsMap[e].name:"Informativa generica"}}),props:{allowAll:{default:!1},showSmartBar:{default:!0},multiPrivacy:{default:!0},readOnly:{default:!1}},data:function(){return{dataEdit:!1,modified:[]}},components:{SmallEditSaveButtonBar:i.a},created:function(){this.readOnly?this.dataEdit=!1:this.showSmartBar||(this.dataEdit=!0)},computed:r()({},Object(n.mapGetters)("terms",["termsMap"]),Object(n.mapState)("owners/users",["recordList"]),Object(n.mapState)("route",["params"]))}},k7t3:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{staticClass:"small-edit-save-button-bar pa-0 ma-0"},[t.editMode?t._e():[t.hideDelete?t._e():a("v-tooltip",{attrs:{top:"","close-delay":"0","open-delay":"0"}},[a("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:t.color},on:{click:t.onDeleteClick},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v(t._s(t.$t("Delete")))])],1),a("v-tooltip",{attrs:{top:"","close-delay":"0","open-delay":"0"}},[a("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:t.color},on:{click:t.onEditClick},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v(t._s(t.$t("Edit")))])],1)],t.editMode?[t.hideCancel?t._e():a("v-tooltip",{attrs:{top:"","close-delay":"0","open-delay":"0"}},[a("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:t.color},on:{click:t.onCancelClick},slot:"activator"},[a("v-icon",[t._v("exit_to_app")])],1),a("span",[t._v(t._s(t.$t("Cancel")))])],1),a("v-tooltip",{attrs:{top:"","close-delay":"0","open-delay":"0"}},[a("v-btn",{attrs:{slot:"activator",icon:"",flat:"",color:t.color},on:{click:t.onSaveClick},slot:"activator"},[a("v-icon",[t._v("save")])],1),a("span",[t._v(t._s(t.$t("Save")))])],1)]:t._e()],2)},staticRenderFns:[]};e.a=s},o9cn:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".small-edit-save-button-bar .btn{margin:0}",""])},oXv0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("NjoO"),r=a("FvIf"),n=a("VU/8")(s.a,r.a,!1,null,null,null);e.default=n.exports},tsoV:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"owner-user-form-terms",attrs:{column:""}},[a("v-flex",{staticClass:" lighten-5 pa-3",attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[t.multiPrivacy?a("v-flex",{staticClass:"title pt-3",attrs:{xs12:"",sm6:""}},[t._v("\n                    "+t._s(t.$t("Terms"))+"\n                ")]):t._e(),t.showSmartBar?a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:"",sm6:""}},[a("SmallEditSaveButtonBar",{attrs:{"hide-delete":!0,"edit-mode":t.dataEdit},on:{edit:function(e){t.dataEdit=!0},save:t.onSave,cancel:function(e){t.dataEdit=!1}}})],1):t._e()],1),t._l(t.recordList,function(e,s,r){return[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("table",{staticClass:"owner-user-form-terms-data-table mb-3"},[t._l(e,function(e,s,r){return[0==r?[a("tr",{staticClass:"caption owner-user-form-terms-data-table-privacy-name"},[a("td",{staticClass:"pl-3 pt-2",attrs:{colspan:"3"}},[a("b",[t._v("\n                                            "+t._s(t.termName(e))+"\n                                        ")])])]),a("tr",{staticClass:"caption"},[a("th",{attrs:{width:"1%"}},[t._v(t._s(t.$t("Date")))]),a("th",{attrs:{width:"1%"}},[t._v(t._s(t.$t("Time")))]),a("th",{attrs:{width:"50%"}},[t._v(t._s(t.$t("Treatments")))]),a("th",{attrs:{width:"30%"}},[t._v(t._s(t.$t("Privacy url"))+"/IP")])])]:t._e(),e?[a("tr",{staticClass:"caption"},[e.created?a("td",[t._v(t._s(t._f("dmy")(e.created)))]):t._e(),e.created?a("td",[t._v(" "+t._s(t._f("time")(e.created))+" ")]):t._e(),a("td",[e.privacy?a("span",[t._l(e.privacy.paragraphs,function(s){return[a("div",[a("div",[a("i",[t._v(t._s(s.title))])]),t._l(s.treatments,function(s,r){return[a("div",{staticClass:"ml-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.selected,expression:"t.selected"}],staticClass:"bigger-check",attrs:{type:"checkbox",disabled:t.flagDisabled(s)},domProps:{checked:Array.isArray(s.selected)?t._i(s.selected,null)>-1:s.selected},on:{click:function(a){t.addChangedTerm(e)},change:function(e){var a=s.selected,r=e.target,n=!!r.checked;if(Array.isArray(a)){var i=t._i(a,null);r.checked?i<0&&t.$set(s,"selected",a.concat([null])):i>-1&&t.$set(s,"selected",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(s,"selected",n)}}}),t._v(" "+t._s(s.code)+"\n                                                            "),s.mandatory||s.restrictive?a("span",{staticClass:"ml-2"},[t._v("\n                                                                ("),s.mandatory?a("span",[t._v(t._s(t.$t("Mandatory"))+" ")]):t._e(),s.restrictive?a("span",[t._v(t._s(t.$t("Restrictive"))+" ")]):t._e(),t._v(")\n                                                            ")]):t._e()])]})],2)]})],2):t._e()]),a("td",[t._v("\n                                        "+t._s(e.page)),a("br"),t._v(t._s(e.ip)+"\n                                    ")])]),a("tr",[a("td",{staticClass:"pa-0",staticStyle:{"border-bottom":"3px solid grey"},attrs:{colspan:"4"}},[a("v-expansion-panel",{staticClass:"elevation-0"},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Other data")))]),a("v-card",[a("v-card-text",{staticClass:"grey lighten-3"},[t._l(e.form,function(e,s){return[a("div",{key:s},[a("b",[t._v(t._s(s))]),t._v(": "+t._s(e)+"\n                                                            ")])]})],2)],1)],1)],1)],1)]),e.properties&&e.properties.history?a("tr",[a("td",{staticClass:"pa-0",staticStyle:{"border-bottom":"3px solid grey"},attrs:{colspan:"4"}},[a("v-expansion-panel",{staticClass:"elevation-0"},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("History")))]),a("v-card",[a("v-card-text",{staticClass:"grey lighten-3",staticStyle:{"font-size":"12px"}},[t._l(e.properties.history,function(e){return[a("div",[t._v("\n                                                                "+t._s(t._f("dmy")(e.update))+" "+t._s(t._f("time")(e.update))+"  "),a("b",[t._v(t._s(e.user))]),t._l(e.variations,function(e){return[t._v("\n                                                                    "+t._s(t.$t(e.action))+" "+t._s(e.flag)+"\n                                                                ")]})],2)]})],2)],1)],1)],1)],1)]):t._e()]:t._e()]})],2)])],1)]})],2)],1)},staticRenderFns:[]};e.a=s},y9sX:function(t,e,a){"use strict";var s=a("ipnL"),r=a("tsoV");var n=function(t){a("0QMV")},i=a("VU/8")(s.a,r.a,!1,n,null,null);e.a=i.exports}});